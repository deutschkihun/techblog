---
title: "Critical Rendering Path (CRP)"
excerpt: "브라우저가 생성되는 과정을 이해하는 것을 잘 알지 못한채 웹 개발을 하는 경우가 굉장히 많다고 생각한다. 필자도 어떤 원리로 브라우저가 생성되는지 모르는채 작업을 해왔었다. 그러다가 이전에 실무진 인터뷰에서 CRP 질문을 했던적이 있었는데 그때 정말 남아날 먼지가 없을 정도로 탈탈 털렸던 기억이 있다. 그러한 실수를 반복하지 않기 위해 이 포스팅을 작성한다."
coverImage: "/assets/blog/8.crp/cover.jpg"
date: "2022-09-01T12:35:07.322Z"
author:
  name: Kihun Kim (deutschkihun)
  picture: "/assets/blog/authors/kihun.jpg"
ogImage:
  url: "/assets/blog/8.crp/cover.jpg"
---

브라우저가 생성되는 과정을 이해하는 것을 잘 알지 못한채 웹 개발을 하는 경우가 굉장히 많다고 생각한다. 필자도 어떤 원리로 브라우저가 생성되는지 모르는채 작업을 해왔었다. 그러다가 이전에 실무진 인터뷰에서 CRP 질문을 했던적이 있었는데 그때 정말 남아날 먼지가 없을 정도로 탈탈 털렸던 기억이 있다. 그러한 실수를 반복하지 않기 위해 이 포스팅을 작성한다.

## Critical Rendering Path (CRP)

- DOM Tree 구축
- CSSOM Tree 구축
- JavaScript 실행
- Render Tree 생성
- Layout 생성 (viewport 크기,비율과 같은 것을 결정됨)
- 페인팅 (pixel 과 같은 요소들이 결정됨)

DOM은 HTML 문서(document)의 객체표현
즉 DOM을 활용해서 단순히 텍스트 파일 이기만 했던 HTML 문서에 자바스크립트 언어가 접근가능.
DOM Tree 는 완전히 파싱된 HTML 문서의 객체표현을 Tree 구조로 표현한 것을 말한다.
DOM 에는 몇가지 주의 할 만한 특징들이 있다. 첫번째는 DOM 은 HTML 이 아니다.

![dom1](/assets/blog/8.crp/dom1.png)

이런 형태가 HTML 이다. HTML 을 객체 기반 방식으로 표현하게 되면 DOM 이 된다.

DOM 의 객체들은 위처럼 node tree 형태로 구성이 되어있다. 여기서 node 는 HTML element 를 의미한다.

![dom2](/assets/blog/8.crp/dom2.png)

두번째로 주의 할 것은 DOM 은 브라우저에 보이지 않는다.
브라우저 viewport 에 보이게 되는 것들은 Render Tree (DOM+CSSOM).
Render Tree 는 오직 스크린에 그려지는 것으로만 구성되어 있어 DOM 과는 다르다.

예를 들어 위처럼 p 의 스타일은 display:”none” 으로 되어있기 때문에 Render Tree 에는 포함이 되지 않지만 DOM에는 포함이 된다.

![dom3](/assets/blog/8.crp/dom3.png)

![dom4](/assets/blog/8.crp/dom4.png)

위는 DOM 을 나타낸 것이며 아래는 Render Tree 를 나타낸 것이다.

![render-tree](/assets/blog/8.crp/render-tree.png)

브라우저에 보여지는 것은 render tree 이지 dom 이 아니다.

세번째로 DOM 은 개발도구에서 보이는 것이 아닙니다. 여기서 개발도구라 하면 chrome 의 경우 오른쪽 마우스 inspect 를 말한다. 여기서 보면 개발도구 요소 검사기가 있는데, 요소 검사기는 DOM 뿐만 아니라 DOM은 가지고 있지 않는 가상요소 (예를 들어 ::after ::before) 들도 포함이 되어있다.

CSSOM 도 기본원리는 DOM 과 동일하다. 허나 DOM은 HTML 의 객체표현이라면 CSSOM 은 CSS의 객체 표현방식이다. DOM 처럼 node tree 와 같은 구조로 되어있다. CSSOM 은 DOM과 합쳐져서 Render Tree 를 구성하게 된다.
